#include <stdlib.h>         // Подключение стандартной библиотеки (atoi, atof)

#include "globals.h"        // Заголовочный файл с глобальными переменными или структурами
#include "rpzt.h"           // Заголовочный файл, предположительно с функцией control_calc()
#include "krnt.h"           // Заголовочный файл, предположительно с функцией approx_value()

// Главная управляющая функция приложения
void run_app(int count, char* arg[]) {
    // Инициализация структуры параметров приложения
    struct AppParams ap_pr = {
        .a = 12,            // Начальное значение a
        .b = 12,            // Конечное значение b
        .tn = 10,           // Начальное время tn
        .tk = 35,           // Конечное время tk
        .t1 = 22.5,         // Временная точка t1
        .Uvx1 = 5,          // Значение напряжения в первой точке
        .Uvx2 = 25,         // Значение напряжения во второй точке
        .U1 = 20,           // Значение напряжения U1
        .U2 = 150,          // Значение напряжения U2
        .n = atoi(arg[2])   // Количество точек, переданное через аргументы
    };

    // Выбор действия по номеру варианта, переданного в аргументах
    switch (atoi(arg[1])) {
        case 1:
            // Вариант 1: выполнить прямой расчёт
            control_calc(ap_pr);
            break;

        case 2:
            // Вариант 2: установить погрешность и выполнить приближённый расчёт
            ap_pr.eps = atof(arg[3]) / 100;   // Перевод из процентов в дробное значение
            approx_value(ap_pr);
            break;
    }
}

